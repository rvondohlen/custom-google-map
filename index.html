<!DOCTYPE html>
<html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
  <title>Google Maps Multiple Markers</title> 
  <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.10.1.min.js"></script>
  <script src="js/infobox.js"></script>
  <style>
    #map {
        width:  100%;
        height: 500px;
    }

    .infoBox {
        -webkit-animation: fadeIn 500ms; 
        animation: fadeIn 500ms;
    }

    @-webkit-keyframes fadeIn {
        from {opacity: 0;}
        to {opacity: 1;}
    }

    @keyframes fadeIn {
        from {opacity: 0;}
        to {opacity: 1;}
    }

  </style>
</head> 
<body>
  <div id="map"></div>

  <script type="text/javascript">

    var styles = [{
        stylers: [              
            //{hue: "#5EB84A" },
            { saturation: -5 },
            { lightness: 40 }
        ]
    }, {
        featureType: "road",
        elementType: "geometry",
        stylers: [
            { lightness: 100 },
            { visinfoboxility: "simplified" }
        ]
    }, {
        featureType: "road",
        elementType: "labels",
        stylers: [
            { visinfoboxility: "on" }
        ]
    }];

    var map = new google.maps.Map(document.getElementById('map'), {
      center: new google.maps.LatLng(9.077751,8.6774567),
      zoom: 6,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    map.set('styles', styles);


    function initMarkers(map, markerData) {
        var newMarkers = [],
            marker;
            
        for(var i=0; i<markerData.length; i++) {
            marker = new google.maps.Marker({
                map: map,
                draggable: true,
                position: markerData[i].latLng,
                visinfoboxle: true,
                icon: 'img/marker.png'
            }),
            boxText = document.createElement("div"),
            //these are the options for all infoboxes
            infoboxOptions = {
                 content: boxText,
                disableAutoPan: true,
                maxWidth: 0,
                pixelOffset: new google.maps.Size(-140, 0),
                zIndex: null,
                boxStyle: {
                    background: "",
                    opacity: 1,
                    width: "280px"
                },
                closeBoxMargin: "12px 4px 2px 2px",
                closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif",
                infoBoxClearance: new google.maps.Size(1, 1),
                visible: true,
                pane: "floatPane",
                enableEventPropagation: true
            };
            
            newMarkers.push(marker);
            //define the text and style for all infoboxes
            boxText.style.cssText = "border: 1px solid #dedede; margin-top: 8px; background:#fff; color:#222; font-family:'Open Sans', 'Helvetica Neue', Helvetica, Arial; font-size:12px; padding: 5px; border-radius:4px; -webkit-border-radius:4px; -moz-border-radius:4px;";
            boxText.innerHTML = '<h5>' + markerData[i].title + '</h5><hr><p>' + markerData[i].description + '</p>';
            //Define the infobox
            newMarkers[i].infobox = new InfoBox(infoboxOptions);

            //Open first when page is loaded
            newMarkers[0].infobox.open(map, marker);
            map.panTo(markerData[i].latLng);

            //Open box on click and close all others
            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                    for (var j=0;j<newMarkers.length;j++) {
                         newMarkers[j].infobox.close(map, this);
                      }
                    newMarkers[i].infobox.open(map, this);
                    map.panTo(markerData[i].latLng);
                }
            })(marker, i));
                    
        }
        
        return newMarkers;

        var oldDraw = infobox.draw;
        infobox.draw = function() {
           oldDraw.apply(this);
           jQuery(infobox.div_).hide();
           jQuery(infobox.div_).fadeIn('slow'); 
        }

    }

    markers = initMarkers(map, [
        { latLng: new google.maps.LatLng(11.918478, 5.908902), title: "Marker 1", description: "Lorem ipsum dolor sit amet, consectetur adipisicing elit." },
        { latLng: new google.maps.LatLng(8.407168, 3.89843), title: "Marker 2", description: "Lorem ipsum dolor sit amet, consectetur adipisicing elit." },
        { latLng: new google.maps.LatLng(9.719886, 11.402092), title: "Marker 3", description: "Lorem ipsum dolor sit amet, consectetur adipisicing elit." },
        { latLng: new google.maps.LatLng(9.568251, 6.974602), title: "Marker 4", description: "Lorem ipsum dolor sit amet, consectetur adipisicing elit." },
        { latLng: new google.maps.LatLng(7.656553, 8.897209), title: "Marker 5", description: "Lorem ipsum dolor sit amet, consectetur adipisicing elit." }
    ]);
  
  </script> 
</body>
</html>